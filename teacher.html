<!-- ▼ ここから最小デバッグ版：必ずログが出る -->
<script type="module">
const L = (t)=>document.getElementById('log').textContent += t+"\n";
L("module start");

// Firebaseモジュール
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getAuth, onAuthStateChanged, signInWithPopup, GoogleAuthProvider,
         signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut }
  from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
import { getFirestore, doc, getDoc, setDoc, updateDoc, serverTimestamp }
  from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";
L("imports OK");

// ← あなたの config
const firebaseConfig = {
  apiKey: "AIzaSyBzRI3ReUylTAyRhUusWiSyShUMA-mqfAw",
  authDomain: "web1-fc8d7.firebaseapp.com",
  projectId: "web1-fc8d7",
  storageBucket: "web1-fc8d7.firebasestorage.app",
  messagingSenderId: "186079003085",
  appId: "1:186079003085:web:b4bfb7a359017366e70484",
  measurementId: "G-HHSR5ZTG15
};

let app, auth, db;
try { app = initializeApp(firebaseConfig); L("initializeApp OK"); }
catch(e){ L("initializeApp ERR: "+e.message); }

try { auth = getAuth(app); db = getFirestore(app); L("auth/db OK"); }
catch(e){ L("auth/db ERR: "+e.message); }

function render(u){
  const el = document.getElementById('auth');
  if(!u){
    el.innerHTML = `
      <button id="gin">Googleでサインイン</button>
      <input id="em" placeholder="メール"><input id="pw" type="password" placeholder="パスワード">
      <button id="ein">メールでログイン</button><button id="eup">新規登録</button>`;
    document.getElementById('gin').onclick = ()=>signInWithPopup(auth,new GoogleAuthProvider());
    document.getElementById('ein').onclick = ()=>signInWithEmailAndPassword(auth, em.value, pw.value);
    document.getElementById('eup').onclick = ()=>createUserWithEmailAndPassword(auth, em.value, pw.value);
  }else{
    el.innerHTML = `${u.email} <button id="out">サインアウト</button>`;
    document.getElementById('out').onclick = ()=>signOut(auth);
  }
}

onAuthStateChanged(auth, (u)=>{ L("onAuthStateChanged: "+(u?"ログイン済":"未ログイン")); render(u); });

// 予期せぬエラー表示
window.addEventListener("error", e=>L("window.error: "+e.message));
window.addEventListener("unhandledrejection", e=>L("promise reject: "+(e.reason?.message||e.reason)));
</script>
<!-- ▲ 最小デバッグ版 -->
